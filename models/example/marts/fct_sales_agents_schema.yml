version: 2

models:
  - name: fct_sales_agents
    description: >
      Fact table mapping sales to agents.
      Each row corresponds to one agent per unique sale (reference_id).
      Company revenue is equally split among agents if multiple agents share the same sale.
    columns:
      - name: reference_id
        description: Unique sale identifier
        tests:
          - not_null

      - name: order_date_kyiv
        description: Timestamp of the order in Kyiv timezone
        tests:
          - not_null

      - name: sales_agent_name
        description: Name of the sales agent
        tests:
          - not_null

      - name: campaign_name
        description: Associated campaign name

      - name: company_revenue
        description: >
          Revenue for the sale calculated as:
          total_amount + total_rebill_amount - returned_amount
        tests:
          - not_null

      - name: discount_amount
        description: Discount applied to the sale

      - name: revenue_share
        description: >
          Portion of company revenue attributed to each agent,
          calculated as company_revenue divided by the number of distinct agents.
        tests:
          - not_null
