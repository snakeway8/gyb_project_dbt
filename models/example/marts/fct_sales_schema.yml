version: 2

models:
  - name: fct_sales
    description: >
      Fact table of sales transactions.  
      Each row represents a single sale (reference_id),  
      including revenue, discounts, rebills, returns,  
      order/return dates (in multiple time zones), and days_to_return.
    columns:
      - name: reference_id
        description: Unique identifier of the sale
        tests:
          - not_null
          - unique

      - name: product_name
        description: Name of the sold product
        tests:
          - not_null

      - name: country
        description: Customer country
        tests:
          - not_null

      - name: campaign_name
        description: Marketing campaign name

      - name: source
        description: Sales source (chat or call)

      - name: sales_agent_name
        description: Name of the sales agent

      - name: company_revenue
        description: Net revenue from the sale (total + rebills - returns)
        tests:
          - not_null

      - name: total_rebill_amount
        description: Total amount from rebills

      - name: number_of_rebills
        description: Number of rebills

      - name: returned_amount
        description: Returned amount if refund/chargeback happened

      - name: discount_amount
        description: Discount applied to the sale

      - name: order_date_kyiv
        description: Order date in Kyiv timezone

      - name: order_date_utc
        description: Order date converted to UTC

      - name: order_date_ny
        description: Order date converted to New York timezone

      - name: return_date_kyiv
        description: Return date in Kyiv timezone

      - name: return_date_utc
        description: Return date converted to UTC

      - name: return_date_ny
        description: Return date converted to New York timezone

      - name: days_to_return
        description: Difference in days between return and order dates
